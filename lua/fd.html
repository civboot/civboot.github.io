<head>
  <meta charset="utf-8">
  <title>Civboot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../styles.css">
</head>
<nav>
  <ul>
    <a href="../index.html"   class="nav"             >civ/</a>
    <a href="index.html"      class="nav nav-selected">lua/</a>
  </ul>
</nav>

<!DOCTYPE html>
<html>
<body><div class=doc>
fd: synchronous and asynchronous file descriptors
<p>
fd implements an API identical to lua's <span class=code>file</span> object but with support for
async operations following the <a href="lib/lap">lib/lap</a> protocol.
<p>
It also contains a few simple file-backed data structures (fd.VFile and
fd.LLFile).
<p>
<p>
<h1><a id=""fd"" href="#"fd"">Mod fd</h1></a>
filedescriptor: direct control of filedescriptors.
async operations support the LAP (see lib/lap) protocol.
<p>
Can override default `io` module for global async mode.
<p>
<b>Functions</b> <ul>
  <li><span class=code>isTrunc(mode) -&gt; bool</span>
  Given a string mode, return whether the file will be truncated.</li>
  <li><span class=code>isCreate(mode)</span>
  Given a string mode, return whether the file will be created
  if it doesn't exist.</li>
  <li><span class=code>newFD()</span></li>
  <li><span class=code>newFDT()</span></li>
  <li><span class=code>finishRunning(fd, kind, ...)</span></li>
  <li><span class=code>modifiedEq(fs1, fs2)</span>
  return whether two fstat's have equal modification times
  FIXME: move this to civix</li>
  <li><span class=code>openWith(openFn, path, mode)</span></li>
  <li><span class=code>openFD(...) -&gt; M.openWith(S.openFD, ...)</span></li>
  <li><span class=code>openFDT(...) -&gt; M.openWith(S.openFDT, ...)</span></li>
  <li><span class=code>open(...)</span></li>
  <li><span class=code>close()</span></li>
  <li><span class=code>tmpfileFn(sysFn)</span></li>
  <li><span class=code>tmpfile() -&gt; M.tmpfileFn(S.tmpFD)</span></li>
  <li><span class=code>read(...)</span></li>
  <li><span class=code>lines(path, mode)</span></li>
  <li><span class=code>write(...) -&gt; M.output():write(...)</span></li>
  <li><span class=code>openFileno(fileno)</span></li>
  <li><span class=code>input() -&gt; M.stdin</span></li>
  <li><span class=code>output() -&gt; M.stdout</span></li>
  <li><span class=code>flush() -&gt; M.output():flush()</span></li>
  <li><span class=code>type(fd)</span></li>
  <li><span class=code>fileno(fd)</span></li>
  <li><span class=code>ftype(f)</span></li>
  <li><span class=code>isatty(fd)</span></li>
  <li><span class=code>ioStd()</span></li>
  <li><span class=code>ioSync()</span></li>
  <li><span class=code>ioAsync()</span></li>
</ul>
<p>
</div></body>
</html>
